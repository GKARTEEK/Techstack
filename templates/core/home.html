{% extends 'base.html' %}

{% block content %}
<div class="bg-gradient-to-r from-primary-600 to-primary-800 text-white">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 md:py-24">
        <div class="text-center">
            <h1 class="text-4xl font-extrabold tracking-tight sm:text-5xl md:text-6xl">
                <span class="block">Ace Your Technical Interviews</span>
                <span class="block text-primary-200">with TechStack</span>
            </h1>
            <p class="mt-6 max-w-lg mx-auto text-xl text-primary-100 sm:max-w-3xl">
                A comprehensive repository of interview questions across multiple programming languages.
                Practice, learn, and prepare for your next technical interview.
            </p>
            <div class="mt-10 max-w-md mx-auto sm:flex sm:justify-center md:mt-12">
                <form action="{% url 'search' %}" method="get" class="w-full">
                    <div class="flex rounded-md shadow-sm">
                        <input type="text" name="q" placeholder="Search languages, topics, or questions..." class="py-3 px-4 block w-full rounded-l-md border-0 text-gray-900 ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 focus:ring-2 focus:ring-inset focus:ring-primary-600">
                        <button type="submit" class="flex items-center justify-center px-4 py-3 border border-transparent text-base font-medium rounded-r-md text-white bg-primary-900 hover:bg-primary-950 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500">
                            <i class="fas fa-search"></i>
                        </button>
                    </div>
                </form>
            </div>
        </div>
    </div>
</div>

<!-- Featured Languages -->
<div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
    <div class="text-center">
        <h2 class="text-3xl font-extrabold tracking-tight text-gray-900 sm:text-4xl">
            Featured Programming Languages
        </h2>
        <p class="mt-3 max-w-2xl mx-auto text-xl text-gray-500 sm:mt-4">
            Explore interview questions for the most in-demand programming languages.
        </p>
    </div>

    <div class="mt-12 grid gap-5 max-w-lg mx-auto lg:grid-cols-3 lg:max-w-none">
        {% for language in featured_languages %}
            <div class="flex flex-col rounded-lg shadow-lg overflow-hidden hover-card-effect">
                <div class="flex-shrink-0 bg-gradient-to-r from-primary-500 to-primary-700 h-48 flex items-center justify-center">
                    {% if language.logo %}
                        <img class="h-24 w-auto" src="{{ language.logo.url }}" alt="{{ language.name }}">
                    {% else %}
                        <span class="text-5xl font-bold text-white">{{ language.name|slice:":1" }}</span>
                    {% endif %}
                </div>
                <div class="flex-1 bg-white p-6 flex flex-col justify-between">
                    <div class="flex-1">
                        <a href="{% url 'language_detail' language.slug %}" class="block mt-2">
                            <p class="text-xl font-semibold text-gray-900">{{ language.name }}</p>
                            <p class="mt-3 text-base text-gray-500">{{ language.description|truncatewords:20 }}</p>
                        </a>
                    </div>
                    <div class="mt-6">
                        <a href="{% url 'language_detail' language.slug %}" class="text-primary-600 hover:text-primary-700">
                            View Questions <span aria-hidden="true">&rarr;</span>
                        </a>
                    </div>
                </div>
            </div>
        {% empty %}
            <div class="col-span-3 text-center py-8">
                <p class="text-gray-500">No featured languages available yet.</p>
            </div>
        {% endfor %}
    </div>

    <div class="text-center mt-10">
        <a href="{% url 'language_list' %}" class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md shadow-sm text-white bg-primary-600 hover:bg-primary-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500">
            View All Languages
        </a>
    </div>
</div>

<!-- Trending Questions -->
<div class="bg-gray-50">
    <div class="max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12">
        <div class="text-center">
            <h2 class="text-3xl font-extrabold tracking-tight text-gray-900 sm:text-4xl">
                Trending Interview Questions
            </h2>
            <p class="mt-3 max-w-2xl mx-auto text-xl text-gray-500 sm:mt-4">
                Popular questions that are frequently asked in technical interviews.
            </p>
        </div>

        <div class="mt-12 space-y-4">
            {% for question in trending_questions %}
                <div class="bg-white shadow overflow-hidden sm:rounded-lg hover-card-effect">
                    <div class="px-4 py-5 sm:px-6">
                        <div class="flex items-center justify-between">
                            <h3 class="text-lg leading-6 font-medium text-gray-900">
                                <a href="{% url 'question_detail' question.slug %}" class="hover:text-primary-600">
                                    {{ question.title }}
                                </a>
                            </h3>
                            <span class="inline-flex items-center px-3 py-0.5 rounded-full text-sm font-medium 
                                {% if question.difficulty == 'easy' %}
                                    bg-green-100 text-green-800
                                {% elif question.difficulty == 'medium' %}
                                    bg-yellow-100 text-yellow-800
                                {% else %}
                                    bg-red-100 text-red-800
                                {% endif %}
                            ">
                                {{ question.get_difficulty_display }}
                            </span>
                        </div>
                        <p class="mt-1 max-w-2xl text-sm text-gray-500">
                            {{ question.language.name }} â€¢ {{ question.category.name }}
                        </p>
                    </div>
                    <div class="border-t border-gray-200 px-4 py-5 sm:px-6">
                        <p class="text-gray-700">{{ question.content|truncatewords:30 }}</p>
                        <div class="mt-4 flex justify-between">
                            <a href="{% url 'question_detail' question.slug %}" class="text-primary-600 hover:text-primary-700">
                                Read more <span aria-hidden="true">&rarr;</span>
                            </a>
                            <div class="flex items-center text-gray-500">
                                <i class="far fa-bookmark mr-1"></i>
                                <span>{{ question.bookmarks.count }}</span>
                            </div>
                        </div>
                    </div>
                </div>
            {% empty %}
                <div class="text-center py-8">
                    <p class="text-gray-500">No trending questions available yet.</p>
                </div>
            {% endfor %}
        </div>

        <div class="text-center mt-10">
            <a href="{% url 'question_list' %}" class="inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-md text-primary-700 bg-primary-100 hover:bg-primary-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-primary-500">
                Browse All Questions
            </a>
        </div>
    </div>
</div>

<!-- CTA Section -->
<div class="bg-primary-700">
    <div class="max-w-7xl mx-auto py-12 px-4 sm:px-6 lg:py-16 lg:px-8 lg:flex lg:items-center lg:justify-between">
        <h2 class="text-3xl font-extrabold tracking-tight text-white sm:text-4xl">
            <span class="block">Ready to ace your next interview?</span>
            <span class="block text-primary-200">Join our community today.</span>
        </h2>
        <div class="mt-8 flex lg:mt-0 lg:flex-shrink-0">
            <div class="inline-flex rounded-md shadow">
                <a href="{% url 'account_signup' %}" class="inline-flex items-center justify-center px-5 py-3 border border-transparent text-base font-medium rounded-md text-primary-600 bg-white hover:bg-primary-50">
                    Sign up for free
                </a>
            </div>
            <div class="ml-3 inline-flex rounded-md shadow">
                <a href="{% url 'question_list' %}" class="inline-flex items-center justify-center px-5 py-3 border border-transparent text-base font-medium rounded-md text-white bg-primary-600 hover:bg-primary-500">
                    Browse Questions
                </a>
            </div>
        </div>
    </div>
</div>

<style>
    /* Animation for the hero section */
    @keyframes fadeIn {
        from { opacity: 0; transform: translateY(20px); }
        to { opacity: 1; transform: translateY(0); }
    }
    
    .text-4xl, .text-xl, .max-w-md {
        animation: fadeIn 0.8s ease-out forwards;
    }
    
    .text-xl {
        animation-delay: 0.2s;
    }
    
    .max-w-md {
        animation-delay: 0.4s;
    }
</style>

<script>
    // Add animation to cards when they come into view
    document.addEventListener('DOMContentLoaded', function() {
        const cards = document.querySelectorAll('.hover-card-effect');
        
        const observer = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('animate-in');
                    observer.unobserve(entry.target);
                }
            });
        }, {
            threshold: 0.1
        });
        
        cards.forEach(card => {
            observer.observe(card);
        });
    });
</script>
{% endblock %}